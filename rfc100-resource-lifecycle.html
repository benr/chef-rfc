<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable = no">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation-essential/6.2.2/css/foundation.min.css">
    <style>
      a { color: #f18b21; }
      a:hover, a:focus { color: #3f5364; }
    </style>
    <title>Chef RFCs</title>
  </head>
  <body>
    <div class="row medium-12 columns">
      <header class="clearfix">
        <div class="left">
          <a href="/chef-rfc"><h1>Chef RFCs</h1></a>
        </div>
      </header>
<h1>Core Resource Lifecycle</h1>

<p>This RFC describes the support lifecycle of <a href="https://docs.chef.io/resources.html">core resources</a> provided in Chef.</p>

<h2>Motivation</h2>
<div class="highlight"><pre><span></span>As a Chef user,
I want core resources to be usable, reasonable and supported,
so that using Chef is a quality experience.

As a Chef user,
I want to understand the current state of documented resources,
so that I implement resources correctly.

As a Chef developer,
I want to develop useful resources and reduce complexity by eliminating unhelpful resources,
so that I improve the usability of Chef.
</pre></div>
<h2>Guiding Principles</h2>

<p>Core resources ...</p>

<ol>
<li>Should be reasonable. Actions should reflect expected behaviors.</li>
<li>Should be usable. Resource can be used in multiple contexts.</li>
<li>Should be well-designed and self contained.</li>
<li>Should be tested.</li>
<li>Should be maintained on <a href="https://github.com/chef/chef-rfc/blob/master/rfc021-platform-support-policy.md">supported platforms</a> as relevant.</li>
<li>Should minimize surprises.</li>
</ol>

<p>At any given time current resources have an implicit state. To clarify and be explicit about these states, it is proposed that resources have the following states:</p>

<h4>Analysis</h4>

<p>Resources in analysis state are being evaluated to identify who, what, when, and why a resource is (still) needed. A resource could be in this state whether it&#39;s a popular widely used resource in a community cookbook or a gap in common infrastructure element. A resource could re-enter this state when it has been identified as a problematic resource that needs to be evaluated for continued support.</p>

<h4>Development</h4>

<p>Resources in development state are in active development. The value of adding the resource is understood. The number of impacted users has been estimated.</p>

<h4>Supported</h4>

<p>Resources in supported state have been added to Chef, work on relevant platforms, and are tested.</p>

<h4>Deprecated</h4>

<p>Resources in deprecated state have been identified as having significant issues that can not or will not be resolved. Use of the resource will emit a deprecation warning. A compatible cookbook(s) for the deprecated resource may be created or updated to allow use of the deprecated resource.</p>

<h4>Retired</h4>

<p>Resources in retired state have been in deprecated state and emitting warnings and on the next major release of Chef removed from code.</p>

<h2>Specification</h2>

<h3>Criteria for adopting resources</h3>

<p>Factors that influence and inform the decision to adopt a resource include:</p>

<ul>
<li>widespread use of a resource based on analysis of publicly available supermarket cookbooks,</li>
<li>well tested and supported cookbook resources,</li>
<li>percentage of supported platforms,</li>
<li>impact of implementing as a primitive that can be built upon.</li>
</ul>

<h3>Criteria for deprecating resources</h3>

<p>Factors that influence and inform the decision to deprecate a resource include:</p>

<ul>
<li>limited use based on analysis of publicly available supermarket cookbooks,</li>
<li>outdated code or lack of support based on quality of resource and its usability,</li>
<li>security implications,</li>
<li>complex implementation that lacks clarity of consequences of use.</li>
<li>impact of using the resource incorrectly.</li>
</ul>

<h3>Process for adopting resources</h3>

<ul>
<li>Identify resources for adoption.</li>
<li>Create an RFC following the <a href="https://github.com/chef/chef-rfc">Chef RFC</a> process.</li>
<li>Announce on Chef mailing list and Chef Community Slack.</li>
<li>Any proposed changes to the interfaces must be implemented in the cookbook prior to adoption.

<ul>
<li>If there are fundamental issues with the resource whether due to naming standards or interface implementation, a new cookbook should be created implementing the resource as intended.</li>
</ul></li>
<li>Any bugs discovered must be repaired in the cookbook and released prior to adoption.</li>
<li>Resource is added to core chef and documentation is updated.</li>
<li>Add deprecated cookbook warnings for conflicting cookbooks.</li>
</ul>

<h3>Process for deprecating resources</h3>

<ul>
<li>Identify resources for deprecation.</li>
<li>Create an RFC following the <a href="https://github.com/chef/chef-rfc">Chef RFC</a> process.</li>
<li>Announce on Chef mailing list and Chef Community Slack.</li>
<li>Add deprecation warnings in the client and on the docs site.</li>
<li>Add foodcritic rule to detect usage.</li>
<li>Deprecate resource.</li>
</ul>

<h2>Downstream Impact</h2>

<p>Cookbooks that use deprecated resources will need to be modified to depend on the relevant compatibility cookbooks in order to continue using the resources or break on the release of the next version of Chef.</p>

<p>For resources that are adopted into Chef Core, individuals will receive warnings for using conflicting cookbooks.</p>

<h2>References</h2>

<p>https://docs.chef.io/resources.html
https://docs.chef.io/chef<em>deprecations</em>client.html
https://github.com/chef-cookbooks
https://supermarket.chef.io/users/chef</p>

<h2>Copyright</h2>

<p>This work is in the public domain. In jurisdictions that do not allow for this,
this work is available under CC0. To the extent possible under law, the person
who associated CC0 with this work has waived all copyright and related or
neighboring rights to this work.</p>
    </div>
  </body>
</html>
